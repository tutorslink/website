<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutors Link</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* Base Reset */
* {margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif;}
body {background:#000; color:#fff; overflow-x:hidden;}
a, button {text-decoration:none; color:inherit; cursor:pointer;}
.container {max-width:1200px; margin:0 auto; padding:0 20px;}

/* Hero */
header {
  background:linear-gradient(135deg, #ff00ff, #00f0ff);
  position:relative;
  text-align:center;
  padding:120px 20px;
  overflow:hidden;
}
header h1 {font-size:3rem; margin-bottom:20px;}
header p {font-size:1.2rem; margin-bottom:30px;}
.cta-buttons button {
  background:#fff; color:#000; font-weight:700; padding:12px 30px; margin:0 10px; border-radius:12px;
  transition:0.3s;
}
.cta-buttons button:hover {background:#ff0; color:#000; transform:scale(1.05);}

/* Abstract decorations */
header::before, header::after {
  content:''; position:absolute; border-radius:50%; opacity:0.2;
}
header::before {width:400px; height:400px; background:#ff0; top:-100px; left:-150px;}
header::after {width:600px; height:600px; background:#ff00ff; bottom:-200px; right:-200px;}

/* Sections */
section {padding:80px 0; position:relative;}
h2 {font-size:2.5rem; margin-bottom:40px; text-align:center; background:linear-gradient(90deg,#ff0,#ff00ff,#00f0ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
p {margin-bottom:15px; line-height:1.6; color:#eee; transition:0.3s;}
p:hover, h4:hover, h3:hover {color:#ff0;}

/* How it Works */
.steps {display:flex; flex-wrap:wrap; justify-content:center; gap:30px;}
.step {background:#111; padding:30px; border-radius:20px; flex:1 1 300px; text-align:center; box-shadow:0 0 15px #ff00ff55; transition:0.3s;}
.step h3 {margin-bottom:15px; color:#ff0;}
.step:hover {transform:translateY(-10px); box-shadow:0 0 25px #ff0,0 0 35px #00f0ff;}

/* Policies */
.policy {background:#111; margin-bottom:20px; padding:25px; border-radius:15px; box-shadow:0 0 10px #ff00ff33; transition:0.3s; cursor:pointer;}
.policy:hover {box-shadow:0 0 20px #ff0,0 0 25px #00f0ff;}
.policy h4 {display:flex; justify-content:space-between; align-items:center; font-size:1.2rem;}
.policy-content {display:none; margin-top:15px; line-height:1.5; color:#eee;}

/* Reviews */
.reviews {display:flex; flex-wrap:wrap; gap:25px; justify-content:center;}
.review {background:#111; padding:25px; border-radius:15px; box-shadow:0 0 10px #ff00ff33; width:250px; transition:0.3s;}
.review:hover {transform:translateY(-10px); box-shadow:0 0 25px #ff0,0 0 35px #00f0ff;}

/* Find a Tutor */
#find-tutor {background:#111; padding:100px 0;}
.tutor-cards {display:flex; flex-wrap:wrap; justify-content:center; gap:25px;}
.tutor-card {background:#222; padding:25px; border-radius:15px; width:250px; text-align:center; box-shadow:0 0 10px #ff00ff33; transition:0.3s;}
.tutor-card:hover {transform:translateY(-10px); box-shadow:0 0 25px #ff0,0 0 35px #00f0ff;}
.tutor-card h3 {margin-bottom:10px; color:#ff0;}

/* Staff Portal */
#staff-portal {background:#111; padding:80px 0;}
#staff-portal form {max-width:600px; margin:0 auto; display:flex; flex-direction:column; gap:15px;}
#staff-portal input, #staff-portal select, #staff-portal textarea {padding:10px; border-radius:8px; border:none;}
#staff-portal button {background:#ff0; color:#000; padding:12px; font-weight:700; border-radius:10px; cursor:pointer; transition:0.3s;}
#staff-portal button:hover {background:#ff00ff; color:#fff;}

/* Tutors Display */
.tutor-display {display:flex; flex-wrap:wrap; gap:20px; justify-content:center;}
.tutor-box {background:#111; padding:20px; border-radius:15px; width:250px; box-shadow:0 0 10px #ff00ff33; transition:0.3s;}
.tutor-box h4 {color:#ff0; margin-bottom:10px;}
.tutor-box p {color:#eee; margin-bottom:5px;}

/* Support messages */
#support {background:#222; padding:50px 20px;}
#support form {max-width:600px; margin:0 auto; display:flex; flex-direction:column; gap:10px;}
#support button {background:#ff0; color:#000; padding:10px; border-radius:8px; font-weight:700; transition:0.3s;}
#support button:hover {background:#ff00ff; color:#fff;}

/* Apply & Footer */
.apply, footer {background:#000; color:#fff; text-align:center; padding:60px 20px;}
.apply a, footer a {color:#ff0; font-weight:700; transition:0.3s;}
.apply a:hover, footer a:hover {color:#ff00ff;}

/* Auth Modal */
.auth-modal {display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:1000; justify-content:center; align-items:center;}
.auth-content {background:#111; padding:40px; border-radius:20px; max-width:450px; width:90%; box-shadow:0 0 30px #ff00ff; position:relative;}
.auth-content h2 {text-align:center; margin-bottom:25px; font-size:2rem;}
.auth-content input {width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:none; font-size:1rem;}
.auth-content button {width:100%; background:#ff0; color:#000; padding:12px; border-radius:8px; border:none; font-weight:700; cursor:pointer; transition:0.3s; font-size:1rem; margin-bottom:10px;}
.auth-content button:hover {background:#ff00ff; color:#fff;}
.auth-toggle {text-align:center; margin-top:15px; color:#aaa;}
.auth-toggle a {color:#ff0; cursor:pointer; font-weight:600;}
.auth-toggle a:hover {color:#ff00ff;}
.auth-close {position:absolute; top:15px; right:20px; font-size:30px; color:#aaa; cursor:pointer; transition:0.3s; background:none; border:none; padding:0;}
.auth-close:hover {color:#ff0;}
.auth-status {position:fixed; top:20px; right:20px; background:#111; padding:10px 20px; border-radius:10px; box-shadow:0 0 15px #ff00ff55; z-index:999; display:none;}
.auth-status span {color:#ff0; font-weight:600; margin-right:10px;}
.auth-status button {background:#ff00ff; color:#fff; padding:8px 15px; border-radius:8px; border:none; font-weight:600; cursor:pointer; transition:0.3s; margin-left:10px;}
.auth-status button:hover {background:#ff0; color:#000;}

/* Responsive */
@media(max-width:768px){.steps,.tutor-cards,.tutor-display{flex-direction:column; align-items:center;}}
</style>
</head>
<body>

<!-- Hero -->
<header>
<h1>Tutors Link</h1>
<p>Connect with tutors worldwide. Free for students, prices set by tutors. All payments secure through Tutors Link.</p>
<div class="cta-buttons">
  <button onclick="window.location='#find-tutor'">Find a Tutor</button>
  <button onclick="window.location='apply-as-tutor.html'">Apply as Tutor</button>
  <button onclick="openAuthModal('login')" aria-label="Open login modal">Login</button>
  <button onclick="openAuthModal('signup')" aria-label="Open sign up modal">Sign Up</button>
</div>
</header>

<!-- Auth Status (shown when logged in) -->
<div class="auth-status" id="auth-status">
  <span id="user-email-display">Welcome!</span>
  <button onclick="window.location.href='dashboard.html'" style="background:#00f0ff; color:#000;">Dashboard</button>
  <button onclick="handleLogout()">Logout</button>
</div>

<!-- Auth Modal -->
<div class="auth-modal" id="auth-modal" role="dialog" aria-labelledby="auth-title" aria-modal="true">
  <div class="auth-content">
    <button class="auth-close" onclick="closeAuthModal()" aria-label="Close authentication modal" type="button">&times;</button>
    <h2 id="auth-title">Login</h2>
    <form id="auth-form">
      <input type="email" id="auth-email" placeholder="Email Address" aria-label="Email address" required>
      <input type="password" id="auth-password" placeholder="Password" aria-label="Password" required minlength="6">
      <button type="submit" id="auth-submit-btn">Login</button>
    </form>
    <div class="auth-toggle">
      <span id="auth-toggle-text">Don't have an account?</span>
      <a id="auth-toggle-link" onclick="toggleAuthMode()" role="button" tabindex="0">Sign Up</a>
    </div>
  </div>
</div>

<!-- How it Works -->
<section id="how-it-works">
<h2>How It Works</h2>
<div class="container steps">
  <div class="step"><h3>Students</h3><p>Browse tutors → Demo class → Make payment → Connect via Discord</p></div>
  <div class="step"><h3>Tutors</h3><p>Apply → Get approved → Teach → Receive fees securely</p></div>
</div>
</section>

<!-- Policies -->
<section id="policies">
<h2>Platform Policies</h2>
<div class="container">
  <div class="policy"><h4>For Tutors</h4>
    <div class="policy-content"><ul>
      <li>Hide identity until payment is made.</li>
      <li>Do not share contact info before payment.</li>
      <li>Accept 40% commission first month.</li>
      <li>Must be 13+ years old.</li>
    </ul></div>
  </div>
  <div class="policy"><h4>For Students</h4>
    <div class="policy-content"><ul>
      <li>Pay 100% before connecting with tutor.</li>
      <li>Do not share contact info before payment.</li>
      <li>Fees held first month, then transferred to tutor.</li>
      <li>Price per class fixed by tutor.</li>
    </ul></div>
  </div>
  <div class="policy"><h4>General</h4>
    <div class="policy-content"><ul>
      <li>Tutors Link responsible for first-month issues.</li>
      <li>Not responsible after first month.</li>
      <li>Breaking policies may remove access.</li>
    </ul></div>
  </div>
  <div class="policy"><h4>Refunds</h4>
    <div class="policy-content"><ul>
      <li>Refunds only first month.</li>
      <li>Case 1: After demo class, full refund if issues.</li>
      <li>Case 2: During first week, refund for unattended/problem classes.</li>
    </ul></div>
  </div>
</div>
</section>

<!-- Reviews -->
<section id="reviews">
<h2>What Students Say</h2>
<div class="container reviews">
<div class="review">"Amazing tutors! Found the perfect one in minutes."</div>
<div class="review">"Secure payments, very reliable platform!"</div>
<div class="review">"Loved the demo class feature, totally stress-free."</div>
</div>
</section>

<!-- Find a Tutor -->
<section id="find-tutor">
<h2>Find a Tutor</h2>
<div class="container tutor-cards">
  <div class="tutor-card"><h3>Discord</h3><p>Connect with tutors via our server.</p><a href="https://discord.gg/pe8TXPgkAe" target="_blank">Join Discord</a></div>
  <div class="tutor-card"><h3>Instagram</h3><p>Check our posts for tutors & tips.</p><a href="https://instagram.com/tutors.link" target="_blank">@tutors.link</a></div>
  <div class="tutor-card"><h3>TikTok</h3><p>Watch short tutor videos.</p><a href="https://tiktok.com/@tutors_link" target="_blank">@tutors_link</a></div>
</div>
</section>

<!-- Staff Portal -->
<section id="staff-portal">
<h2>Staff Portal - Add Tutor</h2>
<form id="add-tutor-form">
  <input type="text" name="name" placeholder="Tutor Name" required>
  <input type="text" name="subjects" placeholder="Subjects" required>
  <input type="text" name="price" placeholder="Price per class" required>
  <input type="text" name="timezone" placeholder="Time Zone" required>
  <input type="text" name="languages" placeholder="Languages" required>
  <select name="category" required>
    <option value="">Select Category</option>
    <option>IGCSE</option>
    <option>AS/A Levels</option>
    <option>University</option>
    <option>Test Preparation</option>
    <option>Other</option>
  </select>
  <button type="submit">Add Tutor</button>
</form>
<div class="tutor-display" id="tutor-list"></div>
</section>

<!-- Support Messages -->
<section id="support">
<h2>Student Support</h2>
<form id="support-form">
  <input type="text" name="name" placeholder="Your Name" required>
  <input type="email" name="email" placeholder="Your Email" required>
  <textarea name="message" placeholder="Your Question" rows="4" required></textarea>
  <button type="submit">Send Message</button>
</form>
</section>

<!-- Apply as Tutor -->
<section id="apply" class="apply">
<h2>Apply as a Tutor</h2>
<p>Ready to share your knowledge and earn as a tutor? Fill out our professional application form!</p>
<a href="apply-as-tutor.html" style="display:inline-block; background:#ff0; color:#000; padding:15px 30px; border-radius:10px; font-weight:700; text-decoration:none; transition:0.3s;">Start Your Application</a>
</section>

<!-- Footer -->
<footer>
<p>Follow us on <a href="https://instagram.com/tutors.link" target="_blank">Instagram</a> | <a href="https://tiktok.com/@tutors_link" target="_blank">TikTok</a></p>
<p>&copy; 2026 Tutors Link. All rights reserved.</p>
</footer>

<script>
// Configuration - Update this URL to your Railway backend URL after deployment
// For local development: http://localhost:3000
// For production: https://tutorslink.me
const API_BASE_URL = window.location.hostname === 'localhost'
    ? 'http://localhost:3000/api'
    : '/api';


// ============================================
// Utility Functions
// ============================================

// Show loading state
function showLoading(button) {
  button.disabled = true;
  button.dataset.originalText = button.textContent;
  button.textContent = 'Loading...';
}

// Hide loading state
function hideLoading(button) {
  button.disabled = false;
  button.textContent = button.dataset.originalText;
}

// Show success message
function showSuccess(message) {
  alert('✅ ' + message);
}

// Show error message
function showError(message) {
  alert('❌ ' + message);
}

// ============================================
// Policy Expansion
// ============================================
document.querySelectorAll('.policy').forEach(policy => {
  policy.addEventListener('click', () => {
    const content = policy.querySelector('.policy-content');
    content.style.display = (content.style.display === 'block') ? 'none' : 'block';
  });
});

// ============================================
// Fetch and Display Tutors on Page Load
// ============================================
async function fetchTutors() {
  try {
    const response = await fetch(`${API_BASE_URL}/api/tutors`);
    const result = await response.json();
    
    if (result.success && result.data.length > 0) {
      displayTutors(result.data);
    }
  } catch (error) {
    console.error('Error fetching tutors:', error);
    // Silently fail - don't show error to user on page load
  }
}

// Display tutors in the staff portal section
function displayTutors(tutors) {
  const tutorList = document.getElementById('tutor-list');
  tutorList.innerHTML = ''; // Clear existing tutors
  
  tutors.forEach(tutor => {
    // Create tutor box element safely
    const tutorBox = document.createElement('div');
    tutorBox.className = 'tutor-box';
    tutorBox.dataset.tutorId = tutor._id;
    
    // Create and append elements with proper text content (no XSS)
    const nameHeader = document.createElement('h4');
    nameHeader.textContent = tutor.name;
    
    const subjectsP = document.createElement('p');
    subjectsP.textContent = `Subjects: ${tutor.subjects}`;
    
    const priceP = document.createElement('p');
    priceP.textContent = `Price: ${tutor.price}`;
    
    const timezoneP = document.createElement('p');
    timezoneP.textContent = `Time Zone: ${tutor.timezone}`;
    
    const languagesP = document.createElement('p');
    languagesP.textContent = `Languages: ${tutor.languages}`;
    
    const categoryP = document.createElement('p');
    categoryP.textContent = `Category: ${tutor.category}`;
    
    const statusP = document.createElement('p');
    statusP.textContent = `Status: ${tutor.availability}`;
    
    // Create button with event listener (no inline onclick)
    const bookButton = document.createElement('button');
    bookButton.textContent = 'Book a Demo';
    bookButton.style.cssText = 'background:#ff0; color:#000; padding:8px 15px; border-radius:8px; margin-top:10px; cursor:pointer; border:none; font-weight:700;';
    bookButton.addEventListener('click', () => openBookingModal(tutor._id, tutor.name));
    
    // Append all elements
    tutorBox.appendChild(nameHeader);
    tutorBox.appendChild(subjectsP);
    tutorBox.appendChild(priceP);
    tutorBox.appendChild(timezoneP);
    tutorBox.appendChild(languagesP);
    tutorBox.appendChild(categoryP);
    tutorBox.appendChild(statusP);
    tutorBox.appendChild(bookButton);
    
    tutorList.appendChild(tutorBox);
  });
}

// Load tutors when page loads
window.addEventListener('DOMContentLoaded', fetchTutors);

// ============================================
// Add Tutor Form (Staff Portal)
// ============================================
const tutorForm = document.getElementById('add-tutor-form');
tutorForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const submitButton = tutorForm.querySelector('button[type="submit"]');
  showLoading(submitButton);
  
  // Get form data
  const formData = new FormData(tutorForm);
  const tutorData = {
    name: formData.get('name'),
    subjects: formData.get('subjects'),
    price: formData.get('price'),
    timezone: formData.get('timezone'),
    languages: formData.get('languages'),
    category: formData.get('category')
  };
  
  try {
    const response = await fetch(`${API_BASE_URL}/tutors`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(tutorData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      showSuccess('Tutor added successfully!');
      tutorForm.reset();
      // Refresh tutor list
      fetchTutors();
    } else {
      showError(result.message || 'Failed to add tutor');
    }
  } catch (error) {
    console.error('Error adding tutor:', error);
    showError('Network error. Please check your connection.');
  } finally {
    hideLoading(submitButton);
  }
});

// ============================================
// Support Form
// ============================================
const supportForm = document.getElementById('support-form');
supportForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const submitButton = supportForm.querySelector('button[type="submit"]');
  showLoading(submitButton);
  
  // Get form data
  const formData = new FormData(supportForm);
  const supportData = {
    name: formData.get('name'),
    email: formData.get('email'),
    message: formData.get('message')
  };
  
  try {
    const response = await fetch(`${API_BASE_URL}/api/support`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(supportData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      showSuccess('Message sent to staff! We will get back to you soon.');
      supportForm.reset();
    } else {
      showError(result.message || 'Failed to send message');
    }
  } catch (error) {
    console.error('Error sending support message:', error);
    showError('Network error. Please check your connection.');
  } finally {
    hideLoading(submitButton);
  }
});

// ============================================
// Booking Modal and Functionality
// ============================================

// Create booking modal dynamically
function createBookingModal() {
  const modalHTML = `
    <div id="booking-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; justify-content:center; align-items:center;">
      <div style="background:#111; padding:40px; border-radius:20px; max-width:500px; width:90%; box-shadow:0 0 30px #ff00ff;">
        <h2 style="margin-bottom:20px; text-align:center;">Book a Demo Class</h2>
        <form id="booking-form">
          <input type="text" id="student-name" placeholder="Your Name" required style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:none;">
          <input type="email" id="student-email" placeholder="Your Email" required style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:none;">
          <textarea id="booking-message" placeholder="Tell us about your learning goals (optional)" rows="4" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:none;"></textarea>
          <input type="hidden" id="selected-tutor-id">
          <div style="display:flex; gap:10px;">
            <button type="submit" style="flex:1; background:#ff0; color:#000; padding:12px; border-radius:8px; border:none; font-weight:700; cursor:pointer;">Submit Request</button>
            <button type="button" onclick="closeBookingModal()" style="flex:1; background:#666; color:#fff; padding:12px; border-radius:8px; border:none; font-weight:700; cursor:pointer;">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  `;
  document.body.insertAdjacentHTML('beforeend', modalHTML);
  
  // Add booking form submit handler
  const bookingForm = document.getElementById('booking-form');
  bookingForm.addEventListener('submit', handleBookingSubmit);
}

// Open booking modal
function openBookingModal(tutorId, tutorName) {
  const modal = document.getElementById('booking-modal');
  if (!modal) {
    createBookingModal();
  }
  
  document.getElementById('selected-tutor-id').value = tutorId;
  const modalElement = document.getElementById('booking-modal');
  modalElement.style.display = 'flex';
  
  // Update modal title with tutor name (safely using textContent)
  const modalTitle = modalElement.querySelector('h2');
  modalTitle.textContent = `Book a Demo with ${tutorName}`;
}

// Close booking modal
function closeBookingModal() {
  const modal = document.getElementById('booking-modal');
  modal.style.display = 'none';
  document.getElementById('booking-form').reset();
}

// Handle booking form submission
async function handleBookingSubmit(e) {
  e.preventDefault();
  
  const submitButton = e.target.querySelector('button[type="submit"]');
  showLoading(submitButton);
  
  const bookingData = {
    studentName: document.getElementById('student-name').value,
    studentEmail: document.getElementById('student-email').value,
    tutorId: document.getElementById('selected-tutor-id').value,
    message: document.getElementById('booking-message').value
  };
  
  try {
    const response = await fetch(`${API_BASE_URL}/bookings`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(bookingData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      showSuccess('Booking request submitted! Our team will contact you soon.');
      closeBookingModal();
    } else {
      showError(result.message || 'Failed to submit booking');
    }
  } catch (error) {
    console.error('Error submitting booking:', error);
    showError('Network error. Please check your connection.');
  } finally {
    hideLoading(submitButton);
  }
}

// Close modal when clicking outside
window.addEventListener('click', (e) => {
  const modal = document.getElementById('booking-modal');
  if (modal && e.target === modal) {
    closeBookingModal();
  }
  
  // Close auth modal when clicking outside
  const authModal = document.getElementById('auth-modal');
  if (authModal && e.target === authModal) {
    closeAuthModal();
  }
});
</script>

<script type="module" src="./main.js">              
</script>

  
</body>
</html>
